<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Lista de Conjuros</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    table { width: 100%; border-collapse: collapse; table-layout: auto; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; white-space: normal; word-wrap: break-word; }
    th { background-color: #f2f2f2; }
    th.sortable { cursor: pointer; position: relative; }
    .sort-indicator { font-size: 0.6em; display: inline-block; vertical-align: middle; margin-left: 4px; }
    .sort-indicator .asc, .sort-indicator .desc { display: block; line-height: 0.8em; color: #ccc; }
    th.sortable.sorted-asc .sort-indicator .asc { color: #000; }
    th.sortable.sorted-desc .sort-indicator .desc { color: #000; }
    tr:hover { background-color: #f5f5f5; cursor: pointer; }
    .controls { margin-bottom: 10px; }
    .controls label, .controls input, .controls select { margin-right: 10px; }
    .pagination { margin-top: 10px; }
    button:disabled { opacity: 0.5; cursor: not-allowed; }

    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
    .modal-content { background-color: #fff; margin: 10% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 500px; border-radius: 8px; }
    .modal-close { float: right; font-size: 1.2em; font-weight: bold; cursor: pointer; }

    blockquote { padding: 0.5em 1em; margin: 1em 0; color: #6a737d; background-color: #f6f8fa; }
    #report-modal textarea { width: 100%; box-sizing: border-box; max-width: 100%; resize: vertical; }
  </style>
</head>
<body>
  <h1>Conjuros</h1>
  <div class="controls">
    <label for="search">Buscar:</label>
    <input type="text" id="search" placeholder="Buscar por nombre">
    <label for="levelFilter">Nivel:</label>
    <select id="levelFilter">
      <option value="">Todos</option>
      <option value="0">0 (Truco)</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
    </select>
    <label for="classFilter">Clase:</label>
    <select id="classFilter">
      <option value="">Todas</option>
    </select>
    <label for="schoolFilter">Escuela:</label>
    <select id="schoolFilter">
      <option value="">Todas</option>
    </select>
    <label for="pageSize">Mostrar:</label>
    <select id="pageSize">
      <option value="10">10</option>
      <option value="25">25</option>
      <option value="50">50</option>
    </select>
    <label for="rangeUnit">Sistema de unidades:</label>
    <select id="rangeUnit">
      <option value="metros">Métrico</option>
      <option value="pies">Imperial</option>
    </select>
  </div>

  <table>
    <thead>
      <tr>
        <th data-key="nombre" class="sortable">Nombre <span class="sort-indicator"><span class="asc">&#9650;</span><span class="desc">&#9660;</span></span></th>
        <th>Clases</th>
        <th data-key="escuela" class="sortable">Escuela <span class="sort-indicator"><span class="asc">&#9650;</span><span class="desc">&#9660;</span></span></th>
        <th data-key="nivel" class="sortable">Nivel <span class="sort-indicator"><span class="asc">&#9650;</span><span class="desc">&#9660;</span></span></th>
        <th>Tiempo de lanzamiento</th>
        <th>Ritual</th>
        <th>Alcance</th>
        <th>Visible</th>
        <th>Componentes</th>
        <th>Concentración</th>
        <th>Duración</th>
        <th>Tirada de salvación</th>
        <th>Requiere ataque</th>
      </tr>
    </thead>
    <tbody id="table-body"></tbody>
  </table>

  <div class="pagination">
    <button id="prev">‹ Anterior</button>
    <span id="page-info"></span>
    <button id="next">Siguiente ›</button>
  </div>

  <div class="contact">
    <button class="report-error-button" id="reportError" style="margin-top: 10px; background-color: khaki">
      Reportar un error
    </button>
    <button id="ghBtn" class="github-button">Ver en GitHub</button>
  </div>

  <blockquote>
    <p id="attribution">
      Todos los hechizos contenidos en este proyecto pertenecen a <i>Wizards of the Coast</i> bajo licencia <b>Creative Commons Attribution 4.0 International (CC BY 4.0)</b>.
      Aquellos conjuros que no se encuentran en el archivo <a href="https://media.dndbeyond.com/compendium-images/srd/5.2/SRD_CC_v5.2.pdf">SRD v5.2</a> han sido adaptados.
    </p>
  </blockquote>

  <div id="modal" class="modal">
    <div class="modal-content">
      <span id="modal-close" class="modal-close">&times;</span>
      <h2 id="modal-title"></h2>
      <h3>Materiales</h3>
      <p id="modal-materials"></p>
      <h3>Descripción</h3>
      <p id="modal-description"></p>
    </div>
  </div>

  <div id="report-modal" class="modal">
    <div class="modal-content">
      <span id="report-modal-close" class="modal-close">&times;</span>
      <h2>Reportar un error</h2>
      <form id="report-form" action="https://formspree.io/f/xrblnzav" method="POST" data-formspree>
        <input type="hidden" name="_subject" value="Reporte de error - Conjuros">
        <label for="report-message">Describe el error:</label><br>
        <textarea
          id="report-message"
          name="message"
          rows="8"
          required
          placeholder="¿Qué no funciona? ¿Qué conjuro es incorrecto?"
        ></textarea>
        <br><br>
        <button type="submit">Enviar reporte</button>
      </form>
    </div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
